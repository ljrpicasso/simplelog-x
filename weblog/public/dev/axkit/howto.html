<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Simon Woodside | HOWTO build AxKit on Mac OS X 10.4 Tiger</title>
<meta name="author" lang="en" content="Simon Woodside" xml:lang="en" />
<meta name="description" lang="en" content="Simon Woodside's personal home page." xml:lang="en" />
<link rel="Stylesheet" href="/css/screen.css" type="text/css" media="screen" />
<link rel="Stylesheet" href="/css/print.css" type="text/css" media="print" />
<link rel="Stylesheet" href="/css/mobile.css" type="text/css" media="handheld" />
</head>
<body>
<div id="nocsstitlebox">
<b>Simon Woodside | HOWTO build AxKit on Mac OS X 10.4 Tiger</b>
<br />
<b><a href="#content">Skip to content</a> &gt;</b>
</div>
<div id="wrapper">
<div id="sidebarbox">
<div id="sidebarbox_inner">
<div id="bannerbox">
<a href="/">
<img src="/images/swclogo.gif" alt="SWC logo" style="border:none;" />
</a>
</div>
<div id="sitemenu">
<div class="sitemenuitem">
<a href="/weblog">Simon Says</a>
</div>
<div class="sitemenuitem">
<a href="/dev">Development</a>
</div>
<div class="sitemenuitem">
<a href="/content">Content</a>
</div>
<div class="sitemenuitem">
<a href="/about">About</a>
</div>
<br />
<div class="sitemenuitem">
<a href="mailto:sbwoodside@yahoo.com?subject=SimonWoodside.com">email</a>
</div>
</div>
<form method="get" action="http://www.google.com/search">
<div id="searchbox">
<input type="hidden" name="sitesearch" value="simonwoodside.com" />
<input type="text" name="q" maxlength="255" value="Search the site..." onblur="if(this.value=='') this.value='Search the site...';" onfocus="if(this.value=='Search the site...') this.value='';" />
</div>
</form>
<div id="related">
<div>
<b>
              Recent posts related to
              <a href="/weblog/tag/dev/axkit">dev/axkit</a>:
            </b>
</div>
<div xmlns:sax="http://simonwoodside.com/simon-axkit" class="weblog_entry_title">
<a href="/weblog/2005/05/15">AxKit mailing list archives</a>
</div>
<div xmlns:sax="http://simonwoodside.com/simon-axkit" class="weblog_entry_title">
<a href="/weblog/2004/10/02">axkit almost 2 years later</a>
</div>
<div xmlns:sax="http://simonwoodside.com/simon-axkit" class="weblog_entry_title">
<a href="/weblog/2004/06/16">speed up big xslt data sets</a>
</div>
<div xmlns:sax="http://simonwoodside.com/simon-axkit" class="weblog_entry_title">
<a href="/weblog/2004/02/14">New way to speed read, and Axkit OS X update</a>
</div>
<div xmlns:sax="http://simonwoodside.com/simon-axkit" class="weblog_entry_title">
<a href="/weblog/2004/02/14">panther update hassles</a>
</div>
<div xmlns:sax="http://simonwoodside.com/simon-axkit" class="weblog_entry_title">
<a href="/weblog/2003/05/19">post</a>
</div>
</div>
</div>
</div>
<div id="content">
<div id="navi">
<div id="pathbar"><span class="pathbaritem"><a href="/">Home</a></span> &gt; <span class="pathbaritem"><a href="/dev">Software dev</a></span> &gt; <span class="pathbaritem">AxKit</span></div>
<div id="submenu">
<span class="submenuitem">
<a href="/dev/xml">XML</a>
</span>
<span class="submenuitem">
<a href="/dev/symbian">Symbian</a>
</span>
<span class="submenuitem">
<a href="/dev/mozilla">Camino</a>
</span>
</div>
</div>
<div id="content_inner"><div id="titlebox"><h1 class="body_title">HOWTO build AxKit on Mac OS X 10.4 Tiger</h1></div>

<style>
pre {
  margin: 3mm; padding: 3mm;
  background-color: #EEE;
  border-width: 1px; border-style: solid;
}
</style>

<p>Last updated, 2005/09/22 - using 10.4.2. I started with a fresh install of 10.4,
Xcode 2.1, and fink.
Mac OS X is getting to be a better and better UNIX system to run stuff like AxKit on,
so this HOWTO is actually shorter and easier than it used to be.
</p>

<p>Update 2004/02/13 - using 10.3.0. I started with a fresh install of 10.3.0 
and a fresh install of Xcode 1.1 and a fresh install of fink too.
</p>

<p>Update 2003/07/09. I no longer use Sablotron as LibXSLT is now considered
to be better, faster, and I found the support is good. So, you can skip
that part of the instructions (which were a hassle anyway).
</p>


<h2>Read this</h2>

<p>A few notes before we begin.
</p>

<h3>fink</h3>

<p>You should use the <a href="http://fink.sf.net/">fink</a> open-source compilation/
package manager to install most of the good stuff here. If you don't have it, get
it now. It's always good to use the <code>apt-get</code> command to install
pre-compiled binaries whenever possible
(as opposed to <code>fink</code>) because it's so much faster.
Fink's easy to use but I'm assuming to know how it works.
</p>

<h3>CPAN</h3>

<p>I also use <a href="http://www.cpan.org/">CPAN</a>, like everyone else, to get the perl
 modules that are needed. Set that up now if you haven't already. (google for cpan and
 "OS X" should help). I'm going to assume you know how to use CPAN.
 To run CPAN on OS X just use the <code>cpan</code> command (you usually have to run it as root).
</p>

<h3>Where to put files that you are building from source</h3>

<p>
I always build software in my "sandbox" directory under my home directory. 
For axkit, I use <code>~/sandbox/axkit</code>.
</p>

<p>Now that we have those items out of the way, now we get to the installation.
</p>


<h2>Perl</h2>

<p>Former version of Mac OS X came with old and out of date versions of perl. But OS X
10.4 comes with perl 5.8.6. So, no need to update perl any more.
</p>



<h2>Install some important libraries
</h2>

<p>You'll need to install libxml, libxslt and expat.
You can usually rely on fink to install relatively current versions of these libraries. 
</p>

<pre>
sudo apt-get install libxml
sudo apt-get install libxslt
sudo apt-get install expat
</pre>

<p>You may also need to install the -dev and -shlibs versions of these packages as well.
</p>

<p>AxKit in the past can be a bit picky about what versions of libxml and libxslt it's happy with,
although this time I had no problem. The best way to check your versions is 
with <code>xsltproc -V</code>.
I get:
</p>

<pre>
Using libxml 20616, libxslt 10111 and libexslt 809
xsltproc was compiled against libxml 20616, libxslt 10111 and libexslt 809
libxslt 10111 was compiled against libxml 20616
libexslt 809 was compiled against libxml 20616
</pre>



<h2>Install perl modules and AxKit</h2>

<p>AxKit requires a whole bunch of other associated modules. 
Usually you can rely on CPAN to do all the work for you but right now there's a problem
with some Apache modules. Still load up CPAN now.
</p>

<pre>
sudo perl -MCPAN -e shell
</pre>

<p>Now begin by installing XML::LibXML. Former version gave trouble on OS X but 1.5.6 
seems to be OK.
</p>

<pre>
install XML::LibXML
</pre>

<p>Next we will install XML::Parser. This one can be tricky because it relies on the
expat library. If you installed expat with fink, it's in a "non-standard" location.
</p>

<pre>
o conf makepl_arg "EXPATLIBPATH=/sw/lib EXPATINCPATH=/sw/include"
install XML::Parser
</pre>

<p>
Now we install AxKit itself.
</p>

<p>There's an annoying problem with Apache perl modules that can no longer
test when running as root. Clearly this is a problem when using CPAN since it must be run
as root. So, we will have to install certain modules manually. Drop out of CPAN and
go back to /usr/local/src and make sure you are NOT root for now.
</p>

<pre>
wget http://search.cpan.org/CPAN/authors/id/M/MS/MSERGEANT/AxKit-1.6.2.tar.gz
</pre>

<p>(or whatever the latest version of AxKit is)
</p>

<pre>
tar -xvzf AxKit-1.6.2.tar.gz
cd AxKit-1.62/
perl Makefile.PL
make
make test
sudo make install
</pre>

<p>The Makefile for AxKit is quite intelligent, it will ask you about a whole slew of
"optional" modules that AxKit needs to work correctly. I say "optional" in quotes because
in reality it's best to install most of them. As of this writing I recommend you say "yes"
to ALL of the optional modules EXCEPT XML::Sablotron -- don't install sablotron.
</p>

<p>After you make your choices, you will eventually see something like this:
</p>

<pre>
---- Unsatisfied dependencies detected during [M/MS/MSERGEANT/AxKit-1.6.2.tar.gz] -----
    Error
    Perl::Tidy
    XML::LibXSLT
    XML::XPath
Shall I follow them and prepend them to the queue
of modules we are processing right now? [yes] 
</pre>

<p>Say yes :-) Say yes to all of the "unsatisfied dependencies" questions.
</p>

<p>Nearly done now.
</p>





<h2>Configure Apache for use with AxKit</h2>

<p>You used to have to compile a new Apache to get a working version of mod_perl, but
Apple's got their act together now and the pre-installed Apache (called <code>httpd</code>
on the disk) is the right version (1.3), has a working mod_perl, and will work fine
with AxKit. Hooray!
</p>

<p>Instead of telling you how to do this, I'll just send you over to the 
<a href="http://axkit.org/docs/quick_start.dkb?section=1">AxKit Quick Start Guide</a>. 
Skip the install, since you already did that, and go straight to the 
"Edit your httpd.conf file" section.
</p>


<h2>Help and feedback
</h2>

<p>Hopefully everything will work! If it doesn't, you have two options. The first is to
<a href="mailto:sbwoodside@yahoo.com">email me personally</a>. The second (and better) 
option is to post to the 
<a href="http://axkit.org/mailinglist.xml">axkit-users mailing list</a>. 
Myself and several other OS X AxKit users are on there.
</p>



  <div style="clear:both;"></div><div id="footerbox" style="font-family:sans-serif;"><p>Copyright Â© 
        1996-2007 Simon Woodside. If no license is noted, rights are reserved.</p><p><a href="http://validator.w3.org/check/referer">Valid XHTML 1.0 strict?</a>
        Made with 
        <a href="http://www.axkit.org/">AxKit</a>
        and
        <a href="http://simonwoodside.com/dev/xml/saxite">Saxite</a>.
      </p></div></div>
</div>
</div>
</body>
</html>
